<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç‰©ä»¶è©³ç´°ï½œæ±äº¬è¨­è¨ˆ</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body { font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif; color: #333; background: #f5f6f8; }
    a { text-decoration: none; color: inherit; }

    /* Header */
    header {
      position: sticky; top: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 40px; height: 64px;
      background: #fff; box-shadow: 0 1px 6px rgba(0,0,0,.08);
    }
    .logo { font-size: 22px; font-weight: 800; color: #1ab3c8; letter-spacing: .04em; }
    .logo span { color: #333; }
    .header-cta {
      background: #1ab3c8; color: #fff; font-size: 13px; font-weight: 700;
      padding: 10px 22px; border-radius: 4px; transition: background .2s;
    }
    .header-cta:hover { background: #13a0b4; }
    .back-link {
      font-size: 13px; color: #888; display: flex; align-items: center; gap: 6px;
      padding: 8px 0; transition: color .2s;
    }
    .back-link:hover { color: #1ab3c8; }

    /* Layout */
    .page-wrap { max-width: 1100px; margin: 0 auto; padding: 32px 20px 80px; }
    .breadcrumb { font-size: 12px; color: #aaa; margin-bottom: 20px; display: flex; align-items: center; gap: 6px; }
    .breadcrumb a { color: #1ab3c8; }
    .breadcrumb a:hover { text-decoration: underline; }

    /* Main grid */
    .detail-grid { display: grid; grid-template-columns: 1fr 360px; gap: 28px; align-items: start; }

    /* Left column */
    .left-col {}

    /* Gallery */
    .gallery {
      border-radius: 16px; overflow: hidden;
      background: #e0e0e0;
      height: 440px;
    }
    .gallery img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .no-img {
      width: 100%; height: 100%;
      display: flex; align-items: center; justify-content: center;
      color: #bbb; font-size: 15px;
    }

    /* Title card */
    .title-card {
      background: #fff; border-radius: 14px; padding: 28px 32px;
      box-shadow: 0 2px 12px rgba(0,0,0,.06); margin-top: 20px;
    }
    .prop-station { font-size: 13px; color: #888; margin-bottom: 6px; }
    .prop-name {
      font-size: 24px; font-weight: 900; color: #1a1a1a; margin-bottom: 16px; line-height: 1.3;
    }
    .prop-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
    .tag {
      font-size: 12px; font-weight: 700; padding: 4px 12px; border-radius: 20px;
    }
    .tag-cyan { background: #e6f9fc; color: #0e7a8a; }
    .tag-gray { background: #f0f0f0; color: #666; }
    .tag-green { background: #e6fff5; color: #0a7a55; }
    .tag-orange { background: #fff5e6; color: #a05a00; }
    .price-row {
      display: flex; align-items: baseline; gap: 4px;
      border-top: 1px solid #f0f0f0; padding-top: 18px; margin-top: 4px;
    }
    .price-big { font-size: 38px; font-weight: 900; color: #1ab3c8; }
    .price-unit { font-size: 16px; font-weight: 600; color: #888; margin-top: 6px; }
    .monthly-fees { display: flex; gap: 20px; margin-top: 10px; flex-wrap: wrap; }
    .fee-item { font-size: 13px; color: #777; }
    .fee-item strong { color: #444; }

    /* Spec table */
    .card { background: #fff; border-radius: 14px; padding: 28px 32px; box-shadow: 0 2px 12px rgba(0,0,0,.06); margin-top: 20px; }
    .card-title { font-size: 16px; font-weight: 800; color: #222; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 2px solid #e6f9fc; }
    .spec-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0; }
    .spec-row {
      display: flex; padding: 12px 0; border-bottom: 1px solid #f5f5f5;
      align-items: flex-start; gap: 12px;
    }
    .spec-row:last-child { border-bottom: none; }
    .spec-label { font-size: 12px; color: #999; font-weight: 700; min-width: 80px; padding-top: 1px; }
    .spec-value { font-size: 13px; color: #333; font-weight: 600; }

    /* Features */
    .features-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 6px; }
    .feature-item {
      display: flex; align-items: center; gap: 8px;
      background: #f0fbfd; border: 1.5px solid #cceef5;
      border-radius: 8px; padding: 9px 12px;
      font-size: 13px; color: #0e7a8a; font-weight: 600;
    }

    /* Description */
    .desc-text { font-size: 14px; color: #555; line-height: 1.9; }

    /* Right column â€” sticky sidebar */
    .right-col { position: sticky; top: 84px; }

    .inquiry-card {
      background: #fff; border-radius: 14px; padding: 28px 24px;
      box-shadow: 0 4px 20px rgba(0,0,0,.09);
    }
    .inquiry-title { font-size: 17px; font-weight: 800; margin-bottom: 6px; }
    .inquiry-sub { font-size: 12px; color: #888; margin-bottom: 22px; line-height: 1.7; }
    .f-label { display: block; font-size: 12px; font-weight: 700; color: #555; margin-bottom: 5px; margin-top: 14px; }
    .f-label .req { color: #e05555; margin-left: 3px; }
    .f-input {
      width: 100%; border: 1.5px solid #e0e0e0; border-radius: 7px;
      padding: 11px 13px; font-size: 14px; outline: none;
      font-family: inherit; transition: border-color .2s;
    }
    .f-input:focus { border-color: #1ab3c8; }
    .submit-btn {
      display: block; width: 100%; margin-top: 20px;
      background: #1ab3c8; color: #fff; font-size: 15px; font-weight: 700;
      padding: 15px; border: none; border-radius: 8px; cursor: pointer;
      letter-spacing: .04em; font-family: inherit; transition: background .2s, transform .15s;
    }
    .submit-btn:hover { background: #13a0b4; transform: translateY(-1px); }
    .form-note { text-align: center; font-size: 11px; color: #aaa; margin-top: 12px; }
    .form-note a { color: #1ab3c8; }

    .agent-strip {
      margin-top: 16px; background: #f8f9fb; border-radius: 10px; padding: 14px 16px;
      display: flex; align-items: center; gap: 12px;
    }
    .agent-avatar {
      width: 42px; height: 42px; border-radius: 50%; background: #ddd; overflow: hidden; flex-shrink: 0;
    }
    .agent-avatar img { width: 100%; height: 100%; object-fit: cover; }
    .agent-info { font-size: 12px; }
    .agent-name { font-weight: 700; color: #333; }
    .agent-role { color: #aaa; margin-top: 2px; }

    /* Not found */
    .not-found {
      text-align: center; padding: 100px 20px; color: #aaa;
    }
    .not-found h2 { font-size: 22px; margin-bottom: 12px; }
    .not-found a { color: #1ab3c8; font-weight: 700; }

    /* Toast */
    .toast {
      position: fixed; bottom: 28px; right: 28px;
      background: #0a8a55; color: #fff; padding: 13px 22px;
      border-radius: 8px; font-size: 14px; font-weight: 600;
      opacity: 0; transform: translateY(12px);
      transition: all .3s; z-index: 300; pointer-events: none;
    }
    .toast.show { opacity: 1; transform: none; }

    /* Footer */
    footer {
      background: #1e2633; color: rgba(255,255,255,.6);
      text-align: center; padding: 32px 20px; font-size: 12px; line-height: 2;
    }
    footer a { color: rgba(255,255,255,.7); margin: 0 10px; }
    .footer-logo { font-size: 20px; font-weight: 800; color: #1ab3c8; margin-bottom: 10px; }

    @media (max-width: 900px) {
      .detail-grid { grid-template-columns: 1fr; }
      .right-col { position: static; }
      .gallery { height: 260px; }
      .spec-grid { grid-template-columns: 1fr; }
      .features-grid { grid-template-columns: repeat(2, 1fr); }
      header { padding: 0 16px; }
    }
  </style>
</head>
<body>

<!-- Header -->
<header>
  <a href="index.html" class="logo">æ±äº¬è¨­è¨ˆ<span>.</span></a>
  <div style="display:flex;gap:12px;align-items:center;">
    <a href="index.html" class="back-link">â† ç‰©ä»¶ä¸€è¦§ã«æˆ»ã‚‹</a>
    <a href="#inquiry" class="header-cta">ç„¡æ–™ç›¸è«‡ã™ã‚‹</a>
  </div>
</header>

<!-- Main -->
<div class="page-wrap" id="pageContent">
  <div class="not-found" id="notFound" style="display:none;">
    <h2>ç‰©ä»¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</h2>
    <p style="margin-bottom:20px;">URLãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã€å‰Šé™¤ã•ã‚ŒãŸå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
    <a href="index.html">â† ç‰©ä»¶ä¸€è¦§ã«æˆ»ã‚‹</a>
  </div>

  <div id="propDetail" style="display:none;">
    <!-- Breadcrumb -->
    <div class="breadcrumb">
      <a href="index.html">ãƒˆãƒƒãƒ—</a>
      <span>â€º</span>
      <a href="index.html#listings">ç‰©ä»¶ä¸€è¦§</a>
      <span>â€º</span>
      <span id="bcStation"></span>
    </div>

    <div class="detail-grid">
      <!-- LEFT -->
      <div class="left-col">
        <!-- Gallery -->
        <div class="gallery" id="gallery">
          <div class="no-img">ç”»åƒãªã—</div>
        </div>

        <!-- Title card -->
        <div class="title-card">
          <div class="prop-station" id="dStation"></div>
          <div class="prop-name" id="dName"></div>
          <div class="prop-tags" id="dTags"></div>
          <div class="price-row">
            <div class="price-big" id="dPrice"></div>
            <div class="price-unit">ä¸‡å††</div>
          </div>
          <div class="monthly-fees" id="dFees"></div>
        </div>

        <!-- Spec table -->
        <div class="card">
          <div class="card-title">ğŸ“‹ ç‰©ä»¶æ¦‚è¦</div>
          <div class="spec-grid" id="dSpecs"></div>
        </div>

        <!-- Features -->
        <div class="card" id="featuresCard" style="display:none;">
          <div class="card-title">âœ¨ è¨­å‚™ãƒ»ç‰¹å¾´</div>
          <div class="features-grid" id="dFeatures"></div>
        </div>

        <!-- Description -->
        <div class="card" id="descCard" style="display:none;">
          <div class="card-title">ğŸ“ ç‰©ä»¶èª¬æ˜</div>
          <div class="desc-text" id="dDesc"></div>
        </div>
      </div>

      <!-- RIGHT â€” Inquiry sidebar -->
      <div class="right-col" id="inquiry">
        <div class="inquiry-card">
          <div class="inquiry-title">ã“ã®ç‰©ä»¶ã«ã¤ã„ã¦ç›¸è«‡ã™ã‚‹</div>
          <div class="inquiry-sub">å°‚ä»»ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒç„¡æ–™ã§ã”å¯¾å¿œã—ã¾ã™ã€‚<br>ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚</div>

          <form onsubmit="sendInquiry(event)">
            <input type="hidden" id="inquiryPropId" />
            <label class="f-label">ãŠåå‰ï¼ˆã²ã‚‰ãŒãªï¼‰<span class="req">*</span></label>
            <input class="f-input" type="text" placeholder="ä¾‹ï¼‰ã‚„ã¾ã  ãŸã‚ã†" required />

            <label class="f-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹<span class="req">*</span></label>
            <input class="f-input" type="email" placeholder="ä¾‹ï¼‰example@email.com" required />

            <label class="f-label">é›»è©±ç•ªå·<span class="req">*</span></label>
            <input class="f-input" type="tel" placeholder="ä¾‹ï¼‰090-1234-5678" required />

            <label class="f-label">ã”å¸Œæœ›ã®é€£çµ¡æ–¹æ³•</label>
            <select class="f-input">
              <option>ãƒ¡ãƒ¼ãƒ«</option>
              <option>é›»è©±</option>
              <option>ã©ã¡ã‚‰ã§ã‚‚å¯</option>
            </select>

            <label class="f-label">ã”è³ªå•ãƒ»å‚™è€ƒ</label>
            <textarea class="f-input" rows="3" placeholder="å†…è¦‹å¸Œæœ›ãƒ»ãƒ­ãƒ¼ãƒ³ç›¸è«‡ãªã©" style="resize:vertical;"></textarea>

            <button type="submit" class="submit-btn">ğŸ“© ç„¡æ–™ã§å•ã„åˆã‚ã›ã‚‹</button>
          </form>

          <p class="form-note">
            <a href="#">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>ã«åŒæ„ã®ä¸Šã€é€ä¿¡ã—ã¦ãã ã•ã„ã€‚
          </p>

          <div class="agent-strip">
            <div class="agent-avatar">
              <img id="agentAvatar" src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=80&q=80" alt="agent"
                   onerror="this.parentElement.style.background='#ccc'" />
            </div>
            <div class="agent-info">
              <div class="agent-name" id="agentName">æ‹…å½“ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</div>
              <div class="agent-role" id="agentRole">ä¸­å¤ãƒªãƒãƒ™å°‚é–€ï½œæ±äº¬è¨­è¨ˆ</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer>
  <div class="footer-logo">æ±äº¬è¨­è¨ˆ.</div>
  <div>
    <a href="#">åˆ©ç”¨è¦ç´„</a>
    <a href="#">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
  </div>
  <p style="margin-top:12px;">Â© TSUKURUBA Inc.</p>
</footer>

<div class="toast" id="toast"></div>

<script>
  const STORE_KEY  = 'tokyoSekkei_properties';
  const AGENTS_KEY  = 'tokyoSekkei_agents';

  const DEFAULT_AGENTS = [
    { id: 1, name: 'ç”°ä¸­ ã•ãã‚‰', role: 'ä¸­å¤ãƒãƒ³ã‚·ãƒ§ãƒ³å°‚é–€', phone: '03-1234-5678', email: 'tanaka@tokyo-sekkei.jp', img: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=80&q=80' },
    { id: 2, name: 'éˆ´æœ¨ å¥å¤ª',   role: 'ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æ‹…å½“',   phone: '03-2345-6789', email: 'suzuki@tokyo-sekkei.jp', img: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=80&q=80' },
    { id: 3, name: 'å±±ç”° ç¾å’Œ',   role: 'æŠ•è³‡ç‰©ä»¶å°‚é–€',         phone: '03-3456-7890', email: 'yamada@tokyo-sekkei.jp', img: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=80&q=80' },
  ];

  const DEFAULT_PROPS = [
    { id:1, station:'ç¥æ³‰é§…',     area:69, type:'1LDK', price:7180, status:'sale', age:12, structure:'RC', direction:'å—', floor:5,  totalFloor:10, desc:'ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æ¸ˆã¿ã€‚åºƒã€…ã¨ã—ãŸãƒªãƒ“ãƒ³ã‚°ãƒ€ã‚¤ãƒ‹ãƒ³ã‚°ã€‚', img:'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=1200&q=80', features:['renovation','autoLock','elevator'], agentId:1 },
    { id:2, station:'ä¸­ç›®é»’é§…',   area:79, type:'2LDK', price:6480, status:'sale', age:18, structure:'RC', direction:'å—æ±', floor:8, totalFloor:12, desc:'é§…å¾’æ­©5åˆ†ã®å¥½ç«‹åœ°ã€‚ã‚·ã‚¹ãƒ†ãƒ ã‚­ãƒƒãƒãƒ³æ–°èª¿æ¸ˆã¿ã€‚', img:'https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea?w=1200&q=80', features:['systemKitchen','dishwasher','autoLock','elevator','deliveryBox'], agentId:2 },
    { id:3, station:'è­·å›½å¯ºé§…',   area:90, type:'3LDK', price:7780, status:'sale', age:8,  structure:'SRC', direction:'å—', floor:14, totalFloor:14, desc:'æœ€ä¸Šéšãƒ»è§’éƒ¨å±‹ã€‚äºŒé‡çª“ã§é˜²éŸ³ãƒ»æ–­ç†±ã«å„ªã‚ŒãŸç‰©ä»¶ã€‚', img:'https://images.unsplash.com/photo-1556909172-54557c7e4fb7?w=1200&q=80', features:['cornerUnit','topFloor','doubleGlazing','floorHeating','autoLock','elevator'], agentId:1 },
    { id:4, station:'è¥¿é¦¬è¾¼é§…',   area:61, type:'3LDK', price:4690, status:'sale', age:20, structure:'RC', direction:'å—è¥¿', floor:3, totalFloor:7,  desc:'å¤§å‹ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æ–½å·¥æ¸ˆã¿ã€‚ã‚ªãƒ¼ãƒ«é›»åŒ–ã§å…‰ç†±è²»ç¯€ç´„ã€‚', img:'https://images.unsplash.com/photo-1600573472550-8090b5e0745e?w=1200&q=80', features:['renovation','allElectric','washletToilet','bathDryer','autoLock'], agentId:3 },
    { id:5, station:'ä¸‰è»’èŒ¶å±‹é§…', area:57, type:'2LDK', price:4790, status:'sold', age:14, structure:'RC', direction:'æ±', floor:6,  totalFloor:9,  desc:'ãƒšãƒƒãƒˆå¯ãƒãƒ³ã‚·ãƒ§ãƒ³ã€‚ã‚«ãƒ•ã‚§ãƒ»å•†æ¥­æ–½è¨­ãŒå¾’æ­©åœå†…ã€‚', img:'https://images.unsplash.com/photo-1556909114-6f4f8c0528a9?w=1200&q=80', features:['petOk','autoLock','elevator','deliveryBox'], agentId:2 },
    { id:6, station:'æºã®å£é§…',   area:62, type:'2LDK', price:3980, status:'sale', age:22, structure:'RC', direction:'å—', floor:4,  totalFloor:10, desc:'å—å‘ãæ—¥å½“ãŸã‚Šè‰¯å¥½ã€‚è¿½ã„ç„šããƒ»æµ´å®¤ä¹¾ç‡¥æ©Ÿå®Œå‚™ã€‚', img:'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=1200&q=80', features:['reheating','bathDryer','autoLock','elevator'], agentId:3 },
  ];

  const FEATURES = [
    { key:'floorHeating',  label:'ğŸ”¥ åºŠæš–æˆ¿' },
    { key:'allElectric',   label:'âš¡ ã‚ªãƒ¼ãƒ«é›»åŒ–' },
    { key:'systemKitchen', label:'ğŸ³ ã‚·ã‚¹ãƒ†ãƒ ã‚­ãƒƒãƒãƒ³' },
    { key:'dishwasher',    label:'ğŸ«§ é£Ÿæ´—æ©Ÿ' },
    { key:'reheating',     label:'â™¨ï¸ è¿½ã„ç„šã' },
    { key:'bathDryer',     label:'ğŸ’¨ æµ´å®¤ä¹¾ç‡¥æ©Ÿ' },
    { key:'separateBath',  label:'ğŸ› ç‹¬ç«‹æµ´å®¤ãƒ»æ´—é¢' },
    { key:'washletToilet', label:'ğŸš½ æ¸©æ°´æ´—æµ„ä¾¿åº§' },
    { key:'autoLock',      label:'ğŸ”’ ã‚ªãƒ¼ãƒˆãƒ­ãƒƒã‚¯' },
    { key:'elevator',      label:'ğŸ›— ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼' },
    { key:'deliveryBox',   label:'ğŸ“¦ å®…é…ãƒœãƒƒã‚¯ã‚¹' },
    { key:'concierge',     label:'ğŸ‘¤ ç®¡ç†äººå¸¸é§' },
    { key:'petOk',         label:'ğŸ¾ ãƒšãƒƒãƒˆå¯' },
    { key:'instrumentOk',  label:'ğŸµ æ¥½å™¨ç›¸è«‡å¯' },
    { key:'renovation',    label:'ğŸ”¨ ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æ¸ˆ' },
    { key:'doubleGlazing', label:'ğŸªŸ äºŒé‡çª“ãƒ»è¤‡å±¤ã‚¬ãƒ©ã‚¹' },
    { key:'airCon',        label:'â„ï¸ ã‚¨ã‚¢ã‚³ãƒ³' },
    { key:'ceilingHeight', label:'ğŸ“ å¤©äº•é«˜2.4mä»¥ä¸Š' },
    { key:'cornerUnit',    label:'ğŸ“ è§’éƒ¨å±‹' },
    { key:'topFloor',      label:'ğŸŒ† æœ€ä¸Šéš' },
    { key:'storageRoom',   label:'ğŸ—„ï¸ å°‚ç”¨å€‰åº«ã‚ã‚Š' },
    { key:'bikeParking',   label:'ğŸš² é§è¼ªå ´' },
    { key:'freeInternet',  label:'ğŸ“¶ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆç„¡æ–™' },
    { key:'solar',         label:'â˜€ï¸ å¤ªé™½å…‰ç™ºé›»' },
  ];

  // â”€â”€ Load & render â”€â”€
  function loadProp(id) {
    const raw = localStorage.getItem(STORE_KEY);
    const list = raw ? JSON.parse(raw) : DEFAULT_PROPS;
    return list.find(p => p.id === id) || null;
  }

  const params = new URLSearchParams(location.search);
  const id = Number(params.get('id'));
  const prop = id ? loadProp(id) : null;

  if (!prop) {
    document.getElementById('notFound').style.display = 'block';
  } else {
    document.title = `${prop.station} ${prop.type} ${Number(prop.price).toLocaleString()}ä¸‡å†† ï½œ æ±äº¬è¨­è¨ˆ`;
    document.getElementById('propDetail').style.display = 'block';
    document.getElementById('inquiryPropId').value = prop.id;

    // Breadcrumb
    document.getElementById('bcStation').textContent = `${prop.station} ${prop.type}`;

    // Gallery
    const gallery = document.getElementById('gallery');
    if (prop.img) {
      gallery.innerHTML = `<img src="${prop.img}" alt="${prop.station}" onerror="this.parentElement.innerHTML='<div class=no-img>ç”»åƒãªã—</div>'" />`;
    }

    // Title
    document.getElementById('dStation').textContent = `${prop.station}ã€€å¾’æ­©åœå†…`;
    document.getElementById('dName').textContent = `${prop.station}ã€€${prop.area}ã¡ã€€${prop.type}`;

    // Tags
    const tags = [];
    if (prop.direction) tags.push(`<span class="tag tag-cyan">${prop.direction}å‘ã</span>`);
    if (prop.type)      tags.push(`<span class="tag tag-gray">${prop.type}</span>`);
    if (prop.floor && prop.totalFloor) tags.push(`<span class="tag tag-gray">${prop.floor}éš / ${prop.totalFloor}éšå»º</span>`);
    if (prop.age)       tags.push(`<span class="tag tag-orange">ç¯‰${prop.age}å¹´</span>`);
    if (prop.structure) tags.push(`<span class="tag tag-gray">${prop.structure}</span>`);
    if (prop.status === 'sale') tags.push(`<span class="tag tag-green">è²©å£²ä¸­</span>`);
    document.getElementById('dTags').innerHTML = tags.join('');

    // Price
    document.getElementById('dPrice').textContent = Number(prop.price).toLocaleString();

    // Monthly fees
    const fees = [];
    if (prop.manage) fees.push(`<div class="fee-item">ç®¡ç†è²» <strong>${Number(prop.manage).toLocaleString()}å††</strong>/æœˆ</div>`);
    if (prop.repair) fees.push(`<div class="fee-item">ä¿®ç¹•ç©ç«‹é‡‘ <strong>${Number(prop.repair).toLocaleString()}å††</strong>/æœˆ</div>`);
    document.getElementById('dFees').innerHTML = fees.join('');

    // Spec table
    const specs = [
      ['å°‚æœ‰é¢ç©', prop.area ? `${prop.area}ã¡` : null],
      ['ãƒãƒ«ã‚³ãƒ‹ãƒ¼', prop.balcony ? `${prop.balcony}ã¡` : null],
      ['é–“å–ã‚Š', prop.type],
      ['æ‰€åœ¨éš', prop.floor && prop.totalFloor ? `${prop.floor}éš / ${prop.totalFloor}éšå»º` : prop.floor ? `${prop.floor}éš` : null],
      ['æœå‘', prop.direction ? `${prop.direction}å‘ã` : null],
      ['å»ºç‰©æ§‹é€ ', prop.structure],
      ['ç¯‰å¹´æ•°', prop.age ? `${prop.age}å¹´ï¼ˆç¯‰${2026 - prop.age}å¹´é ƒï¼‰` : null],
      ['åœŸåœ°æ¨©åˆ©', prop.landRight],
      ['å…¥å±…æ™‚æœŸ', prop.moveIn],
      ['é§è»Šå ´', prop.parking],
      ['ç®¡ç†è²»', prop.manage ? `${Number(prop.manage).toLocaleString()}å††/æœˆ` : null],
      ['ä¿®ç¹•ç©ç«‹é‡‘', prop.repair ? `${Number(prop.repair).toLocaleString()}å††/æœˆ` : null],
    ].filter(([, v]) => v);
    document.getElementById('dSpecs').innerHTML = specs.map(([k, v]) => `
      <div class="spec-row">
        <span class="spec-label">${k}</span>
        <span class="spec-value">${v}</span>
      </div>
    `).join('');

    // Features
    const featureKeys = prop.features || [];
    if (featureKeys.length) {
      document.getElementById('featuresCard').style.display = 'block';
      document.getElementById('dFeatures').innerHTML = featureKeys.map(k => {
        const f = FEATURES.find(x => x.key === k);
        return f ? `<div class="feature-item">${f.label}</div>` : '';
      }).join('');
    }

    // Description
    if (prop.desc) {
      document.getElementById('descCard').style.display = 'block';
      document.getElementById('dDesc').textContent = prop.desc;
    }

    // Agent strip
    const agentsRaw = localStorage.getItem(AGENTS_KEY);
    const agentList = agentsRaw ? JSON.parse(agentsRaw) : JSON.parse(JSON.stringify(DEFAULT_AGENTS));
    const agent = prop.agentId ? agentList.find(a => a.id === prop.agentId) : agentList[0];
    if (agent) {
      document.getElementById('agentAvatar').src = agent.img || 'https://via.placeholder.com/80?text=A';
      document.getElementById('agentName').textContent = agent.name;
      document.getElementById('agentRole').textContent = (agent.role || '') + 'ï½œæ±äº¬è¨­è¨ˆ';
    }
  }

  // Inquiry form
  function sendInquiry(e) {
    e.preventDefault();
    const t = document.getElementById('toast');
    t.textContent = 'ãŠå•ã„åˆã‚ã›ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸï¼æ‹…å½“ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ˆã‚Šé€£çµ¡ã„ãŸã—ã¾ã™ã€‚';
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 3500);
    e.target.reset();
  }
</script>
</body>
</html>
